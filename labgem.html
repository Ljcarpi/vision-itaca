<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustAds - The Ad Labyrinth</title>
    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-blue: #00ffff;
            --neon-green: #39ff14;
            --dark-space: #0d0221;
            --stars: #f0f3f5;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: var(--dark-space);
            background-image:
                radial-gradient(white, rgba(255, 255, 255, 0.2) 2px, transparent 40px),
                radial-gradient(white, rgba(255, 255, 255, 0.15) 1px, transparent 30px),
                radial-gradient(white, rgba(255, 255, 255, 0.1) 2px, transparent 40px),
                radial-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1) 2px, transparent 30px);
            background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px;
            background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;
            font-family: 'Courier New', Courier, monospace;
            color: var(--stars);
        }

        #gameCanvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
            z-index: 100;
        }

        .modal-content {
            padding: 40px;
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 15px var(--neon-blue), 0 0 30px var(--neon-blue) inset;
            background: rgba(13, 2, 33, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal h1 {
            font-size: 3em;
            margin: 0;
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink), 0 0 20px #fff;
        }

        .modal p {
            font-size: 1.2em;
            max-width: 600px;
            margin: 20px 0;
            color: var(--stars);
            line-height: 1.6;
        }

        #playAgainBtn {
            padding: 15px 30px;
            font-size: 1.5em;
            cursor: pointer;
            border: 2px solid var(--neon-green);
            background-color: transparent;
            color: var(--neon-green);
            text-shadow: 0 0 5px var(--neon-green);
            box-shadow: 0 0 10px var(--neon-green), 0 0 20px var(--neon-green) inset;
            transition: all 0.2s ease;
        }

        #playAgainBtn:hover {
            background-color: var(--neon-green);
            color: var(--dark-space);
            box-shadow: 0 0 20px var(--neon-green), 0 0 40px var(--neon-green);
        }
        
        #oopsModal .modal-content {
             border: 2px solid #ff4136;
             box-shadow: 0 0 15px #ff4136, 0 0 30px #ff4136 inset;
        }
        
        #oopsModal h1 {
            color: #ff4136;
            text-shadow: 0 0 10px #ff4136, 0 0 20px #fff;
        }

    </style>
</head>
<body>

    <canvas id="gameCanvas"></canvas>

    <div id="winModal" class="modal">
        <div class="modal-content">
            <h1>Congratulations!</h1>
            <p>You've navigated the ad labyrinth and are now the proud owner of 1,000 fictional dollars to spend in the Intergalactic Andromeda System. Explore the stars... or buy more ads?</p>
            <button id="playAgainBtn">Play Again</button>
        </div>
    </div>
    
    <div id="oopsModal" class="modal">
        <div class="modal-content">
            <h1>Oops! Ad Trap!</h1>
            <p>You've clicked an ad! Resetting to the start...</p>
        </div>
    </div>


    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const winModal = document.getElementById('winModal');
        const oopsModal = document.getElementById('oopsModal');
        const playAgainBtn = document.getElementById('playAgainBtn');

        let player, ads, keys, startPos, endPos, confetti;
        let gameActive = true;
        
        // --- Game Configuration ---
        const PLAYER_CONFIG = {
            size: 10,
            speed: 2,
            color: '#00ffff',
            glow: '#00ffff'
        };

        const MAZE_CONFIG = {
            exitSize: 40,
            exitColor: '#39ff14',
            exitGlow: '#39ff14'
        };

        const CONFETTI_CONFIG = {
            count: 200,
            gravity: 0.1,
            terminalVelocity: 5,
            drag: 0.05
        };

        // --- Ad Definitions ---
        // Each ad is an object defining its position, size, shape, and appearance.
        const adTemplates = [
            // Banners
            { text: "COSMIC COLA", link: "https://www.coca-colacompany.com/", bgColor: "#e63946", neonColor: "#ff4d6d" },
            { text: "GALAXY LOANS", link: "https://www.discover.com/", bgColor: "#457b9d", neonColor: "#a8dadc" },
            // Skyscrapers
            { text: "ASTRO-SHOES!", link: "https://www.nike.com/", bgColor: "#fca311", neonColor: "#ffbe0b" },
            { text: "STAR-DATE.COM", link: "https://www.wikipedia.org/", bgColor: "#9b5de5", neonColor: "#c77dff" },
            // Leaderboards
            { text: "Buy Crypto!", link: "https://www.coinbase.com/", bgColor: "#2d6a4f", neonColor: "#40916c" },
            { text: "INTERNET 2.0", link: "https://www.cloudflare.com/", bgColor: "#f15bb5", neonColor: "#ff8fab" },
            // Horns/Irregular
            { text: "ALIEN PETS", link: "https://www.youtube.com/watch?v=J---aiyznGQ", bgColor: "#eeef20", neonColor: "#fcfc5d"}
        ];
        
        function getRandomAd() {
            return adTemplates[Math.floor(Math.random() * adTemplates.length)];
        }
        
        // --- Utility Functions ---
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initGame(); // Re-initialize game on resize to rebuild maze for new dimensions
        }

        // --- Maze & Ad Drawing ---
        function defineMaze() {
            const w = canvas.width;
            const h = canvas.height;
            const p = 15; // padding/path width
            const adH = 60; // Standard ad height
            const adV = 150; // Standard vertical ad height
            
            startPos = { x: p * 2, y: p * 2 };
            endPos = { x: w - MAZE_CONFIG.exitSize, y: h - MAZE_CONFIG.exitSize };

            ads = [
                // Outer Walls
                { ...getRandomAd(), shape: 'rect', x: 0, y: 0, width: w, height: p }, // Top
                { ...getRandomAd(), shape: 'rect', x: 0, y: h - p, width: w, height: p }, // Bottom
                { ...getRandomAd(), shape: 'rect', x: 0, y: 0, width: p, height: h }, // Left
                { ...getRandomAd(), shape: 'rect', x: w - p, y: 0, width: p, height: h }, // Right
                
                // Maze Interior (a simple hardcoded layout)
                // --- Row 1
                { ...getRandomAd(), shape: 'rect', x: 0, y: p * 4, width: w * 0.7, height: adH },
                { ...getRandomAd(), shape: 'rect', x: w * 0.8, y: p, width: adH, height: h * 0.3 },
                // --- Row 2
                { ...getRandomAd(), shape: 'rect', x: w * 0.1, y: p * 4 + adH + p * 2, width: w * 0.8, height: adH },
                // --- Vertical dividers
                { ...getRandomAd(), shape: 'rect', x: w * 0.3, y: p * 4 + adH + p * 2 + adH, width: adH, height: h * 0.4 },
                { ...getRandomAd(), shape: 'rect', x: w * 0.6, y: p * 4, width: adH, height: h * 0.5 },
                // --- Horn shape
                { ...getRandomAd(), shape: 'poly', 
                  points: [ {x: w * 0.7, y: h * 0.8}, {x: w * 0.9, y: h * 0.7}, {x: w*0.8, y: h*0.95} ]
                },
                // --- Bottom section
                { ...getRandomAd(), shape: 'rect', x: 0, y: h - adV - p * 2, width: w * 0.5, height: adH },
                { ...getRandomAd(), shape: 'rect', x: w * 0.6, y: h * 0.8, width: w * 0.4, height: adH }
            ];
        }

        function drawAds() {
            ads.forEach(ad => {
                ctx.save();
                ctx.fillStyle = ad.bgColor;
                ctx.strokeStyle = ad.neonColor;
                ctx.lineWidth = 2;
                ctx.shadowColor = ad.neonColor;
                ctx.shadowBlur = 15;
                
                // Draw shape
                if (ad.shape === 'rect') {
                    ctx.beginPath();
                    ctx.rect(ad.x, ad.y, ad.width, ad.height);
                    ctx.fill();
                    ctx.stroke();
                } else if (ad.shape === 'poly') {
                    ctx.beginPath();
                    ctx.moveTo(ad.points[0].x, ad.points[0].y);
                    for (let i = 1; i < ad.points.length; i++) {
                        ctx.lineTo(ad.points[i].x, ad.points[i].y);
                    }
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                }
                
                // Draw ad text
                ctx.shadowBlur = 0;
                ctx.fillStyle = 'white';
                ctx.font = 'bold 16px "Courier New"';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                // Simple text placement for rectangles
                if (ad.shape === 'rect') {
                    ctx.fillText(ad.text, ad.x + ad.width / 2, ad.y + ad.height / 2);
                }
                
                ctx.restore();
            });
        }
        
        function drawPlayer() {
            ctx.save();
            ctx.fillStyle = PLAYER_CONFIG.color;
            ctx.shadowColor = PLAYER_CONFIG.glow;
            ctx.shadowBlur = 20;
            ctx.beginPath();
            ctx.arc(player.x, player.y, PLAYER_CONFIG.size / 2, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
        }

        function drawExit() {
            ctx.save();
            ctx.strokeStyle = MAZE_CONFIG.exitColor;
            ctx.shadowColor = MAZE_CONFIG.exitGlow;
            ctx.lineWidth = 4;
            ctx.shadowBlur = 20;
            ctx.strokeRect(endPos.x, endPos.y, MAZE_CONFIG.exitSize, MAZE_CONFIG.exitSize);
            
            ctx.fillStyle = MAZE_CONFIG.exitColor;
            ctx.font = 'bold 12px "Courier New"';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowBlur = 5;
            ctx.fillText("EXIT", endPos.x + MAZE_CONFIG.exitSize / 2, endPos.y + MAZE_CONFIG.exitSize / 2);
            ctx.restore();
        }

        // --- Game Logic ---
        function updatePlayerPosition() {
            if (!gameActive) return;

            let dx = 0;
            let dy = 0;

            if (keys['w'] || keys['ArrowUp']) dy -= PLAYER_CONFIG.speed;
            if (keys['s'] || keys['ArrowDown']) dy += PLAYER_CONFIG.speed;
            if (keys['a'] || keys['ArrowLeft']) dx -= PLAYER_CONFIG.speed;
            if (keys['d'] || keys['ArrowRight']) dx += PLAYER_CONFIG.speed;
            
            // Normalize diagonal movement
            if (dx !== 0 && dy !== 0) {
              dx /= Math.sqrt(2);
              dy /= Math.sqrt(2);
            }

            player.x += dx;
            player.y += dy;
        }

        function checkCollisions() {
            if (!gameActive) return;
            
            const pSize = PLAYER_CONFIG.size;
            for (const ad of ads) {
                let collided = false;
                if (ad.shape === 'rect') {
                    if (player.x - pSize/2 < ad.x + ad.width &&
                        player.x + pSize/2 > ad.x &&
                        player.y - pSize/2 < ad.y + ad.height &&
                        player.y + pSize/2 > ad.y) {
                        collided = true;
                    }
                } else if (ad.shape === 'poly') {
                    // Simple bounding box collision for polygons
                    const xs = ad.points.map(p => p.x);
                    const ys = ad.points.map(p => p.y);
                    const minX = Math.min(...xs);
                    const maxX = Math.max(...xs);
                    const minY = Math.min(...ys);
                    const maxY = Math.max(...ys);
                    if (player.x - pSize/2 < maxX && player.x + pSize/2 > minX &&
                        player.y - pSize/2 < maxY && player.y + pSize/2 > minY) {
                        collided = true;
                    }
                }

                if (collided) {
                    handleCollision(ad);
                    break;
                }
            }
        }
        
        function handleCollision(ad) {
            gameActive = false;
            window.open(ad.link, '_blank');
            oopsModal.style.display = 'flex';
            setTimeout(() => {
                oopsModal.style.display = 'none';
                resetPlayer();
                gameActive = true;
            }, 2000); // Show "Oops" message for 2 seconds
        }
        
        function checkWinCondition() {
            if (!gameActive) return;
            
            if (player.x > endPos.x && player.x < endPos.x + MAZE_CONFIG.exitSize &&
                player.y > endPos.y && player.y < endPos.y + MAZE_CONFIG.exitSize) {
                gameActive = false;
                winModal.style.display = 'flex';
                initConfetti();
            }
        }
        
        function resetPlayer() {
            player.x = startPos.x;
            player.y = startPos.y;
        }

        // --- Confetti Logic ---
        function initConfetti() {
            confetti = [];
            const colors = ['#ff00ff', '#00ffff', '#39ff14', '#fca311', '#f15bb5'];
            for (let i = 0; i < CONFETTI_CONFIG.count; i++) {
                confetti.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() * 5) + 2,
                    size: Math.random() * 5 + 2,
                    color: colors[Math.floor(Math.random() * colors.length)]
                });
            }
        }

        function updateAndDrawConfetti() {
            if (!confetti || confetti.length === 0) return;
            
            ctx.save();
            confetti.forEach((p, i) => {
                p.vy += CONFETTI_CONFIG.gravity;
                p.vx *= (1 - CONFETTI_CONFIG.drag);
                
                if (p.vy > CONFETTI_CONFIG.terminalVelocity) {
                    p.vy = CONFETTI_CONFIG.terminalVelocity;
                }
                
                p.x += p.vx;
                p.y += p.vy;

                if (p.y > canvas.height) {
                    // Reset particle to top
                    p.y = -20;
                    p.x = Math.random() * canvas.width;
                }
                
                ctx.fillStyle = p.color;
                ctx.shadowColor = p.color;
                ctx.shadowBlur = 10;
                ctx.fillRect(p.x, p.y, p.size, p.size * 1.5);
            });
            ctx.restore();
        }


        // --- Main Game Loop ---
        function gameLoop() {
            // Clear canvas with a trail effect for the space background
            ctx.fillStyle = 'rgba(13, 2, 33, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            if (gameActive) {
                updatePlayerPosition();
                checkCollisions();
                checkWinCondition();
            }

            drawAds();
            drawExit();
            drawPlayer();
            
            if (winModal.style.display === 'flex') {
                updateAndDrawConfetti();
            }

            requestAnimationFrame(gameLoop);
        }

        // --- Initialization ---
        function initGame() {
            defineMaze();
            player = { x: startPos.x, y: startPos.y };
            keys = { w: false, a: false, s: false, d: false, ArrowUp: false, ArrowLeft: false, ArrowDown: false, ArrowRight: false };
            confetti = [];
            winModal.style.display = 'none';
            oopsModal.style.display = 'none';
            gameActive = true;
        }

        // --- Event Listeners ---
        window.addEventListener('resize', resizeCanvas);
        
        document.addEventListener('keydown', (e) => {
            if (keys.hasOwnProperty(e.key)) {
                e.preventDefault();
                keys[e.key] = true;
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (keys.hasOwnProperty(e.key)) {
                e.preventDefault();
                keys[e.key] = false;
            }
        });

        playAgainBtn.addEventListener('click', () => {
            initGame();
        });
        
        // --- Start Game ---
        resizeCanvas(); // Initial setup
        gameLoop();
    </script>

</body>
</html>
