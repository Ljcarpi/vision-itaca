<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vision-Itaca ‚Äî Pr√≥ximamente</title>
  <meta name="description" content="Vision-Itaca ‚Äî Pr√≥ximamente.">
  <style>
    :root{
      --bg: #0b0f14;
      --fg: #e6edf3;
      --muted: #9fb0c0;
      --accent: #5dd3ff;
      --accent-2:#8cff8a;
      --card: #121821;
      --danger:#ff6b6b;
      --ok:#84ffa3;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      background:
        radial-gradient(1000px 600px at 20% -20%, #164b66 0%, transparent 60%),
        radial-gradient(1200px 700px at 120% 0%, #233d55 0%, transparent 60%),
        var(--bg);
      color: var(--fg);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .container{
      width: min(900px, 100%);
      display:grid;
      gap: 24px;
      grid-template-columns: 1fr;
    }
    header{
      text-align:center;
      padding: 28px 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,0.02);
    }
    .brand{
      font-size: clamp(32px, 6vw, 56px);
      line-height: 1.05;
      margin: 0 0 8px 0;
      font-weight: 800;
      letter-spacing: .5px;
      background: linear-gradient(90deg, var(--fg), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .soon{
      display:inline-block;
      font-size: clamp(16px, 2.6vw, 20px);
      color: var(--muted);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
    }

    /* Card del juego */
    .game-card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      display:grid;
      gap: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .game-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .game-title{
      font-weight: 700;
      letter-spacing:.4px;
    }
    .controls{
      display:flex; gap:8px; flex-wrap:wrap;
      color: var(--muted);
      font-size: 14px;
    }
    .pill{
      border:1px solid rgba(255,255,255,0.12);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(255,255,255,0.03);
    }
    .btn{
      border:none;
      border-radius:10px;
      padding:10px 14px;
      font-weight:600;
      cursor:pointer;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color:#041014;
      transition: transform .06s ease;
    }
    .btn:active{ transform: translateY(1px) scale(0.99); }

    canvas{
      width:100%;
      height:auto;
      aspect-ratio: 16/9;
      display:block;
      border-radius:12px;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.15)),
        #0f1520;
      border:1px solid rgba(255,255,255,0.06);
    }

    .hud{
      display:flex; align-items:center; justify-content:space-between;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color: var(--muted);
      font-size:14px;
    }
    .badge{
      border:1px solid rgba(255,255,255,0.12);
      padding:6px 8px;
      border-radius:8px;
      background: rgba(255,255,255,0.03);
      min-width:80px; text-align:center;
      color: var(--fg);
    }

    .touch{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .tbtn{
      user-select:none;
      -webkit-user-select:none;
      touch-action: manipulation;
      padding:14px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.04);
      color: var(--fg);
      font-weight:700;
      text-align:center;
    }
    @media (min-width: 720px){
      .touch{ display:none; }
    }

    footer{
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      opacity:.9;
    }
    a{ color: var(--accent); text-decoration: none; }
    a:hover{ text-decoration: underline; }
  </style>
</head>
<body>
  <main class="container" aria-label="P√°gina de inicio Vision-Itaca">
    <header>
      <h1 class="brand" aria-label="Vision Itaca">Vision-Itaca</h1>
      <span class="soon" aria-live="polite">Pr√≥ximamente‚Ä¶</span>
    </header>

    <section class="game-card" aria-label="Minijuego">
      <div class="game-header">
        <div class="game-title">Mini-juego: <em>Evita los bloques</em></div>
        <div class="controls">
          <span class="pill">Teclas: ‚Üê ‚Üí (o A / D)</span>
          <span class="pill">Pausa: P</span>
          <span class="pill">Reiniciar: R</span>
        </div>
        <button id="startBtn" class="btn" aria-label="Iniciar o reiniciar juego">Iniciar</button>
      </div>

      <canvas id="game" width="720" height="405" role="img" aria-label="√Årea de juego"></canvas>

      <div class="hud">
        <div>üèÅ Puntuaci√≥n: <span class="badge" id="score">0</span></div>
        <div>üî• M√°xima: <span class="badge" id="best">0</span></div>
        <div>‚è±Ô∏è Velocidad: <span class="badge" id="speed">1.0x</span></div>
      </div>

      <!-- Controles t√°ctiles para mobile -->
      <div class="touch" aria-hidden="false">
        <div class="tbtn" id="leftBtn">‚óÄÔ∏è Izquierda</div>
        <div class="tbtn" id="rightBtn">‚ñ∂Ô∏è Derecha</div>
      </div>
    </section>

    <footer>
      ¬© <span id="year"></span> Vision-Itaca ‚Äî Sitio est√°tico en GitHub Pages.
    </footer>
  </main>

  <script>
    // Utilidades UI
    document.getElementById('year').textContent = new Date().getFullYear();

    // Estado del juego
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d', { alpha: false });

    const scoreEl = document.getElementById('score');
    const bestEl  = document.getElementById('best');
    const speedEl = document.getElementById('speed');
    const startBtn = document.getElementById('startBtn');

    // Controles t√°ctiles
    const leftBtn = document.getElementById('leftBtn');
    const rightBtn = document.getElementById('rightBtn');
    let touchLeft = false, touchRight = false;

    // Persistencia de record
    const BEST_KEY = 'vi_best_score_v1';
    let best = Number(localStorage.getItem(BEST_KEY) || 0);
    bestEl.textContent = best;

    // Dimensiones l√≥gicas
    const W = canvas.width;
    const H = canvas.height;

    // Entidades
    const player = {
      w: 42, h: 42,
      x: W/2 - 21,
      y: H - 60,
      speed: 5.0,
      color: '#8cff8a'
    };

    const state = {
      running: false,
      paused: false,
      over: false,
      tick: 0,
      score: 0,
      speedMult: 1.0,
      obstacles: [],
      spawnEvery: 52, // ticks
      lastTime: 0,
      keyLeft: false,
      keyRight: false
    };

    function resetGame(){
      state.running = true;
      state.paused = false;
      state.over = false;
      state.tick = 0;
      state.score = 0;
      state.speedMult = 1.0;
      state.obstacles = [];
      player.x = W/2 - player.w/2;
      updateHUD();
    }

    function rand(min,max){ return Math.random()*(max-min)+min; }

    function spawnObstacle(){
      const w = rand(30, 90);
      const h = rand(18, 26);
      const x = rand(0, W - w);
      const y = -h - 4;
      const s = rand(2.0, 4.5) * state.speedMult;
      const c = '#5dd3ff';
      state.obstacles.push({x,y,w,h,s,color:c});
    }

    function update(dt){
      if (!state.running || state.paused || state.over) return;

      state.tick++;
      if (state.tick % Math.max(18, Math.floor(state.spawnEvery / state.speedMult)) === 0){
        spawnObstacle();
      }

      // Aumenta dificultad
      if (state.tick % 300 === 0){
        state.speedMult = Math.min(3.5, state.speedMult + 0.1);
        player.speed = Math.min(9.0, player.speed + 0.2);
      }

      // Input
      const moveL = state.keyLeft || touchLeft;
      const moveR = state.keyRight || touchRight;
      if (moveL && !moveR) player.x -= player.speed * state.speedMult;
      if (moveR && !moveL) player.x += player.speed * state.speedMult;

      player.x = Math.max(0, Math.min(W - player.w, player.x));

      // Obst√°culos
      for (const o of state.obstacles){
        o.y += o.s * state.speedMult;
      }
      // Recicla y punt√∫a
      state.obstacles = state.obstacles.filter(o=>{
        const passed = o.y > H + 10;
        if (passed){
          state.score++;
        }
        return !passed;
      });

      // Colisiones
      for (const o of state.obstacles){
        if (intersect(player, o)){
          gameOver();
          break;
        }
      }

      updateHUD();
    }

    function intersect(a,b){
      return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y;
    }

    function draw(){
      // Fondo
      ctx.fillStyle = '#0f1520';
      ctx.fillRect(0,0,W,H);

      // L√≠neas sutiles
      ctx.strokeStyle = 'rgba(255,255,255,0.04)';
      ctx.lineWidth = 1;
      for (let i=1; i<8; i++){
        const x = (W/8)*i;
        ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,H); ctx.stroke();
      }

      // Obst√°culos
      for (const o of state.obstacles){
        const grd = ctx.createLinearGradient(o.x, o.y, o.x, o.y+o.h);
        grd.addColorStop(0, 'rgba(93,211,255,0.95)');
        grd.addColorStop(1, 'rgba(93,211,255,0.55)');
        ctx.fillStyle = grd;
        roundRect(o.x, o.y, o.w, o.h, 6);
      }

      // Player
      ctx.fillStyle = state.over ? '#ff9aa2' : player.color;
      roundRect(player.x, player.y, player.w, player.h, 8);

      // Mensajes
      if (!state.running){
        banner('Pulsa ‚ÄúIniciar‚Äù para jugar', 'Usa ‚Üê ‚Üí o A / D ‚Ä¢ P para pausar ‚Ä¢ R para reiniciar');
      } else if (state.paused){
        banner('Pausa', 'Pulsa ‚ÄúP‚Äù para continuar');
      } else if (state.over){
        banner('¬°Fin del juego!', 'Pulsa ‚ÄúR‚Äù o ‚ÄúIniciar‚Äù para reintentar');
      }
    }

    function roundRect(x,y,w,h,r){
      ctx.beginPath();
      ctx.moveTo(x+r, y);
      ctx.arcTo(x+w, y,   x+w, y+h, r);
      ctx.arcTo(x+w, y+h, x,   y+h, r);
      ctx.arcTo(x,   y+h, x,   y,   r);
      ctx.arcTo(x,   y,   x+w, y,   r);
      ctx.closePath();
      ctx.fill();
    }

    function banner(title, subtitle){
      ctx.fillStyle = 'rgba(0,0,0,0.55)';
      ctx.fillRect(0, H/2-60, W, 120);
      ctx.textAlign = 'center';
      ctx.fillStyle = '#e6edf3';
      ctx.font = '700 28px system-ui, -apple-system, Segoe UI, Roboto, sans-serif';
      ctx.fillText(title, W/2, H/2 - 10);
      ctx.fillStyle = '#9fb0c0';
      ctx.font = '14px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace';
      ctx.fillText(subtitle, W/2, H/2 + 18);
      ctx.textAlign = 'left';
    }

    function updateHUD(){
      scoreEl.textContent = state.score;
      speedEl.textContent = state.speedMult.toFixed(1) + 'x';
    }

    function gameOver(){
      state.over = true;
      state.running = false;
      if (state.score > best){
        best = state.score;
        localStorage.setItem(BEST_KEY, String(best));
        bestEl.textContent = best;
      }
    }

    // Bucle
    function loop(ts){
      const dt = (ts - state.lastTime) / 16.6667; // ~60fps
      state.lastTime = ts;
      update(dt);
      draw();
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);

    // Entradas de teclado
    addEventListener('keydown', (e)=>{
      if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') state.keyLeft = true;
      if (e.key === 'ArrowRight'|| e.key.toLowerCase() === 'd') state.keyRight = true;

      if (e.key.toLowerCase() === 'p'){
        if (state.running && !state.over){
          state.paused = !state.paused;
        }
      }
      if (e.key.toLowerCase() === 'r'){
        resetGame();
      }
    });
    addEventListener('keyup', (e)=>{
      if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') state.keyLeft = false;
      if (e.key === 'ArrowRight'|| e.key.toLowerCase() === 'd') state.keyRight = false;
    });

    // Bot√≥n iniciar
    startBtn.addEventListener('click', ()=>{
      resetGame();
    });

    // Controles t√°ctiles
    const press = (btn, setter, val) => {
      btn.addEventListener('touchstart', (e)=>{ e.preventDefault(); setter(val); }, {passive:false});
      btn.addEventListener('touchend',   (e)=>{ e.preventDefault(); setter(false); }, {passive:false});
      btn.addEventListener('mousedown', ()=> setter(val));
      addEventListener('mouseup', ()=> setter(false));
      btn.addEventListener('mouseleave', ()=> setter(false));
    };
    press(leftBtn,  v => touchLeft  = v, true);
    press(rightBtn, v => touchRight = v, true);

    // Pausar cuando pesta√±a no visible para ahorrar bater√≠a/CPU (simple)
    document.addEventListener('visibilitychange', ()=>{
      if (document.hidden && state.running && !state.over){
        state.paused = true;
      }
    });

    // Dibujo inicial
    draw();
  </script>
</body>
</html>
